<!DOCTYPE html>
<html>
<head>
  <title>Daily Plan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body class="dark-mode">

  <!-- ===== DAILY DASHBOARD ===== -->
  <div id="dailyPage" style="display:none;">
    <h1>Daily Tasks</h1>

    <div class="task-container">
      <!-- Your Tasks -->
      <div class="task-card">
        <h3>Your Tasks</h3>
        <ul id="myTasks"></ul>
        <input id="newTask" placeholder="New task">
        <button onclick="addTask()">Add Task</button>
      </div>

      <!-- Brother's Tasks -->
      <div class="task-card">
        <h3>Brother's Tasks</h3>
        <ul id="broTasks"></ul>
      </div>
    </div>

    <div style="text-align:center; margin-top:20px;">
      <button onclick="window.location.href='index.html'">⬅️ Back to Menu</button>
    </div>
  </div>

  <!-- ===== FIREBASE AUTH CHECK ===== -->
  <!-- 1️⃣ Load app.js first -->
  <script type="module" src="app.js"></script>

<!-- 2️⃣ Then run auth + loadTasks logic -->
  <script type="module">
  import { auth, loadTasks } from './app.js';
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  onAuthStateChanged(auth, (user) => {
    const dailyPage = document.getElementById('dailyPage');
    if (user) {
      dailyPage.style.display = 'block';
      if (typeof loadTasks === "function") loadTasks();
    } else {
      window.location.href = 'index.html';
    }
  });
  </script>
</body>
</html>
